"use strict";(self.webpackChunkunivesp_task_manager_spa=self.webpackChunkunivesp_task_manager_spa||[]).push([[551],{3551:(Jt,k,s)=>{s.r(k),s.d(k,{ProjectsModule:()=>Qt});var f=s(6814),A=s(7081),F=s(2019),g=s(1896),t=s(5879);const et=[];let ot=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(et),g.Bz]})}return o})(),it=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.ez,ot,A.q,F.m]})}return o})();var p=s(7700),u=s(6223);class C{constructor(r){Object.assign(this,r)}}var U=s(4516),h=s(9157),I=s(6263),d=s(3814);function at(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Nome \xe9 obrigat\xf3rio "),t.qZA())}let P=(()=>{class o{constructor(e){this.formBuilder=e,this.data=new C,this.submitedEvent=new t.vpe,console.log("ProjectFormComponent Constructor")}ngOnInit(){this.projectFormGroup=this.formBuilder.group({name:[this.data.name,u.kI.required],description:[this.data.description]})}isFormValid(){return this.projectFormGroup.valid}getFormValue(){return this.projectFormGroup.value}onSubmit(){this.isFormValid()&&this.submitedEvent.emit(this.projectFormGroup.value)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(u.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-form"]],inputs:{data:"data"},outputs:{submitedEvent:"submitedEvent"},decls:18,vars:2,consts:[[1,"container"],[3,"formGroup","keydown.enter"],["fxLayout","","fxLayout.xs","column","fxLayoutAlign","start","fxLayoutGap","10px",1,"container"],["fxFlex","100%"],["matInput","","placeholder","Nome","formControlName","name","required","","autofocus",""],["name",""],[1,"mat-caption"],[4,"ngIf"],["fxLayout","","fxLayout.xs","column","fxlayoutAlign","start start","fxLayoutGap","30px",1,"container"],["fxFlex","","fxFlexAlign","center"],["matInput","","placeholder","Descri\xe7\xe3o","formControlName","description","cdkTextareaAutosize","","cdkAutosizeMinRows","7","cdkAutosizeMaxRows","10"],["description","","autosize","cdkTextareaAutosize"]],template:function(i,a){if(1&i&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("keydown.enter",function(){return a.onSubmit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"mat-form-field"),t._UZ(5,"input",4,5),t.TgZ(7,"mat-hint",6),t._uU(8," Nome do Projeto "),t.qZA(),t.YNc(9,at,2,0,"mat-error",7),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"mat-form-field"),t._UZ(13,"textarea",10,11),t.TgZ(16,"mat-hint",6),t._uU(17," Descri\xe7\xe3o "),t.qZA()()()()()()),2&i){let n;t.xp6(1),t.Q6J("formGroup",a.projectFormGroup),t.xp6(8),t.Q6J("ngIf",null==a.projectFormGroup||null==(n=a.projectFormGroup.get("name"))?null:n.hasError("required"))}},dependencies:[f.O5,U.Nt,h.KE,h.bx,h.TO,I.IC,d.xw,d.SQ,d.Wh,d.XD,d.yH,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}"]})}return o})();var v=s(2296);let N=(()=>{class o{constructor(e,i,a){this.dialogRef=e,this.data=i,this.cdr=a,this.dialogAction="Adicionar",i.id&&(this.dialogAction=`Editar #${i.id}`)}isFormValid(){return this.form?.isFormValid()??!1}getFormValue(){return this.form?.getFormValue()}closeDialog(e){this.dialogRef.close(e)}ngAfterViewChecked(){this.cdr.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(p.so),t.Y36(p.WI),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-form-dialog"]],viewQuery:function(i,a){if(1&i&&t.Gf(P,5),2&i){let n;t.iGM(n=t.CRH())&&(a.form=n.first)}},inputs:{dialogAction:"dialogAction"},decls:9,vars:4,consts:[["mat-dialog-title",""],[3,"data","submitedEvent"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled"]],template:function(i,a){1&i&&(t.TgZ(0,"p",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"app-project-form",1),t.NdJ("submitedEvent",function(c){return a.closeDialog(c)}),t.qZA()(),t.TgZ(4,"mat-dialog-actions")(5,"button",2),t._uU(6,"Cancelar"),t.qZA(),t.TgZ(7,"button",3),t._uU(8," Salvar "),t.qZA()()),2&i&&(t.xp6(1),t.hij(" ",a.dialogAction,"\n"),t.xp6(2),t.Q6J("data",a.data),t.xp6(4),t.Q6J("mat-dialog-close",a.getFormValue())("disabled",!a.isFormValid()))},dependencies:[v.lW,p.ZT,p.uh,p.xY,p.H8,P]})}return o})();var Z=s(3365),_=s(3566),l=s(5313),S=s(9397),D=s(4974),G=s(8337),T=s(5619),O=s(6306),R=s(2096),Y=s(4716);class nt extends G.o2{constructor(r){super(),this.projectService=r,this.projectsSubject=new T.X([]),this.loadingSubject=new T.X(!1),this.loading$=this.loadingSubject.asObservable(),this.count=0}connect(r){return this.projectsSubject.asObservable()}disconnect(r){this.projectsSubject.complete(),this.loadingSubject.complete()}load(r){this.loadingSubject.next(!0),this.projectService.paginate(r).pipe((0,O.K)(()=>(0,R.of)([])),(0,Y.x)(()=>this.loadingSubject.next(!1))).subscribe(e=>{this.count=e.meta.total,this.projectsSubject.next(e.data)})}getCount(){return this.count}}var q=s(9862),E=s(7398),Q=s(553),j=s(5263);let y=(()=>{class o{constructor(e){this.apiService=e,this.resourceUrl=`${Q.N.apiBaseUrl}/projects`}paginate(e){const i=(new q.LE).set("filter",e?.filter??"").set("sortColumn",e?.sortColumn??"id").set("sortOrder",e?.sortOrder??"asc").set("page",e?.page?.toString()??"1").set("per_page",e?.limit?.toString()??"10");return this.apiService.getRequest(this.resourceUrl,i)}getById(e){return this.apiService.getById(this.resourceUrl,e).pipe((0,E.U)(i=>new C(i.data)))}create(e){return this.apiService.postRequest(this.getResourceUrl(),e)}update(e,i){const a=`${this.getResourceUrl()}/${e}`;return console.log(a),this.apiService.patchRequest(a,i)}getResourceUrl(){return this.resourceUrl}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(j.sM))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var J=s(617),L=s(3448),w=s(5860);function rt(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1,"#"),t.qZA())}function st(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function ct(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1,"Nome"),t.qZA())}function lt(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function dt(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1,"Descri\xe7\xe3o"),t.qZA())}function ut(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.description)}}function pt(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1,"Descri\xe7\xe3o"),t.qZA())}function mt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,n=t.oxw();return t.KtG(n.openEditDialog(a))}),t.TgZ(1,"mat-icon",17),t._uU(2,"edit"),t.qZA(),t._uU(3,"Editar "),t.qZA()}}function ht(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",15)(1,"button",16),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.open(n))}),t.TgZ(2,"mat-icon",17),t._uU(3,"launch"),t.qZA(),t._uU(4,"Abrir "),t.qZA(),t.YNc(5,mt,4,0,"button",18),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(5),t.Q6J("ngIf",!e.deleted_at)}}function gt(o,r){1&o&&t._UZ(0,"tr",19)}function ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",20),t.NdJ("dblclick",function(){const n=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onRowDoubleClick(n))}),t.qZA()}}let M=(()=>{class o{constructor(e,i,a){this.projectService=e,this.dialog=i,this.router=a,this.pageSizeOptions=[1,10,25,50,100],this.filter="",this.displayedColumns=["id","name","description","actions"],this.dataSource=new nt(this.projectService),this.dataSource.load()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource,this.sort.sortChange.subscribe(()=>this.resetPaginator()),this.paginator.page.pipe((0,S.b)(()=>this.load())).subscribe(),this.sort.sortChange.pipe((0,S.b)(()=>this.load())).subscribe()}load(){this.dataSource.load({filter:this.filter,sortColumn:this.sort.active,sortOrder:this.sort.direction,page:this.paginator.pageIndex+1,limit:this.paginator.pageSize})}search(e){this.resetPaginator(),this.filter=e,this.load()}onRowDoubleClick(e){this.open(e)}open(e){this.router.navigate(["/projects",e.id])}openEditDialog(e){this.dialog.open(N,{width:"720px",data:e}).afterClosed().subscribe(a=>{a&&this.projectService.update(e.id.toString(),a).subscribe(n=>{this.load()})})}resetPaginator(){this.paginator.pageIndex=0}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(y),t.Y36(p.uw),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-table"]],viewQuery:function(i,a){if(1&i&&(t.Gf(Z.NW,5),t.Gf(_.YE,5),t.Gf(l.BZ,5),t.Gf(D.g5,5)),2&i){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first),t.iGM(n=t.CRH())&&(a.sort=n.first),t.iGM(n=t.CRH())&&(a.table=n.first),t.iGM(n=t.CRH())&&(a.tableSearchField=n.first)}},decls:21,vars:7,consts:[[1,"container"],[3,"loading$"],["hint","Insira o nome do projeto que deseja localizar",3,"search"],["mat-table","","matSort","","aria-label","Elements",1,"mat-elevation-z8","full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dblclick",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",1,"mat-elevation-z8",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],["matSuffix",""],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-loading-spinner",1),t.TgZ(2,"app-table-search-field",2),t.NdJ("search",function(c){return a.search(c)}),t.qZA(),t.TgZ(3,"table",3),t.ynx(4,4),t.YNc(5,rt,2,0,"th",5),t.YNc(6,st,2,1,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,ct,2,0,"th",5),t.YNc(9,lt,2,1,"td",6),t.BQk(),t.ynx(10,8),t.YNc(11,dt,2,0,"th",5),t.YNc(12,ut,2,1,"td",6),t.BQk(),t.ynx(13,9),t._UZ(14,"th"),t.YNc(15,pt,2,0,"th",5),t.YNc(16,ht,6,1,"td",6),t.BQk(),t.YNc(17,gt,1,0,"tr",10),t.YNc(18,ft,1,0,"tr",11),t.qZA(),t._UZ(19,"mat-paginator",12,13),t.qZA()),2&i&&(t.xp6(1),t.Q6J("loading$",a.dataSource.loading$),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.dataSource.getCount())("pageIndex",0)("pageSize",10)("pageSizeOptions",a.pageSizeOptions))},dependencies:[f.O5,v.lW,J.Hw,h.R9,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,Z.NW,_.YE,_.nU,L.g,w.g],styles:[".container[_ngcontent-%COMP%]{padding-top:20px}.full-width-table[_ngcontent-%COMP%]{width:96%;margin:20px auto 0}mat-paginator[_ngcontent-%COMP%]{width:100%;margin:0 auto 20px}.mat-column-id[_ngcontent-%COMP%]{width:75px}.mat-column-actions[_ngcontent-%COMP%]{min-width:130px}.mat-column-description[_ngcontent-%COMP%]{min-width:250px}"]})}return o})();var m=s(5195),B=s(1878);let _t=(()=>{class o{constructor(e,i){this.projectService=e,this.dialog=i,this.addButtonLabel="Adicionar Projeto",this.project=new C}openCreateDialog(){console.log("openCreateDialog"),this.dialog.open(N,{width:"720px",data:this.project}).afterClosed().subscribe(i=>{i?.name&&this.projectService.create(i).subscribe(a=>{this.project=new C,this.table.load()})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(y),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-list"]],viewQuery:function(i,a){if(1&i&&t.Gf(M,5),2&i){let n;t.iGM(n=t.CRH())&&(a.table=n.first)}},decls:13,vars:1,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutAlign","center","fxLayoutGap","10px","fxLayoutGap.xs","5px",1,"container"],["fxFlex.gt-md","65","fxFlex.md","80","fxFlex","90"],["fxLayout","row"],["fxFlex","20%"],[3,"buttonLabel","click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),t._uU(5,"Lista de Projetos"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Gerenciamento de Projetos"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"div",2)(10,"div",3)(11,"app-add-button",4),t.NdJ("click",function(){return a.openCreateDialog()}),t.qZA()()(),t._UZ(12,"app-project-table"),t.qZA()()()()),2&i&&(t.xp6(11),t.Q6J("buttonLabel",a.addButtonLabel))},dependencies:[m.a8,m.dn,m.dk,m.$j,m.n5,d.xw,d.SQ,d.Wh,d.yH,B.L,M],styles:["mat-card-content[_ngcontent-%COMP%]{margin-top:20px}"]})}return o})();var b=function(o){return o[o.New=1]="New",o[o.InProgress=2]="InProgress",o[o.Done=3]="Done",o}(b||{}),z=function(o){return o[o.Low=1]="Low",o[o.Medium=2]="Medium",o[o.High=3]="High",o[o.Urgent=4]="Urgent",o}(z||{});class x{constructor(r){this.completed=!1,this.priority_id=z.Medium,this.status_id=b.New,Object.assign(this,r)}}var $=s(7861),H=s(5631),V=s(1437);function Ct(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Nome \xe9 obrigat\xf3rio "),t.qZA())}let X=(()=>{class o{constructor(e){this.formBuilder=e,this.data=new x,this.submitedEvent=new t.vpe}ngOnInit(){this.taskFormGroup=this.formBuilder.group({name:[this.data.name,u.kI.required],description:[this.data.description],priority_id:[this.data.priority_id],status_id:[this.data.status_id],user_id:[this.data.user_id]})}ngAfterViewInit(){}isFormValid(){return this.taskFormGroup.valid}getFormValue(){return this.taskFormGroup.value}onSubmit(){this.isFormValid()&&this.submitedEvent.emit(this.taskFormGroup.value)}userSelected(e){this.taskFormGroup.controls.user_id.setValue(e.value)}prioritySelected(e){this.taskFormGroup.controls.priority_id.setValue(e.value)}statusSelected(e){this.taskFormGroup.controls.status_id.setValue(e.value)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(u.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-task-form"]],inputs:{data:"data"},outputs:{submitedEvent:"submitedEvent"},decls:25,vars:8,consts:[[3,"formGroup","keydown.enter"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","30px",1,"container"],["fxFlex","100%","fxFlexFill",""],[3,"value","required","selectionChange"],["fxFlex","50%","fxFlexFill",""],["matInput","","placeholder","Nome","formControlName","name","cdkFocusInitial",""],["name",""],[1,"mat-caption"],[4,"ngIf"],["matInput","","placeholder","Descri\xe7\xe3o","formControlName","description","cdkTextareaAutosize","","cdkAutosizeMinRows","7","cdkAutosizeMaxRows","10"],["description","","autosize","cdkTextareaAutosize"]],template:function(i,a){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("keydown.enter",function(){return a.onSubmit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"app-user-select",3),t.NdJ("selectionChange",function(c){return a.userSelected(c)}),t.qZA()()(),t.TgZ(4,"div",1)(5,"div",4)(6,"app-priority-select",3),t.NdJ("selectionChange",function(c){return a.prioritySelected(c)}),t.qZA()(),t.TgZ(7,"div",4)(8,"app-status-select",3),t.NdJ("selectionChange",function(c){return a.statusSelected(c)}),t.qZA()()(),t.TgZ(9,"div",1)(10,"div",2)(11,"mat-form-field"),t._UZ(12,"input",5,6),t.TgZ(14,"mat-hint",7),t._uU(15,"Nome da Tarefa"),t.qZA(),t.YNc(16,Ct,2,0,"mat-error",8),t.qZA()()(),t.TgZ(17,"div",1)(18,"div",2)(19,"mat-form-field"),t._UZ(20,"textarea",9,10),t.TgZ(23,"mat-hint",7),t._uU(24,"Descri\xe7\xe3o"),t.qZA()()()()()),2&i){let n;t.Q6J("formGroup",a.taskFormGroup),t.xp6(3),t.Q6J("value",a.data.user_id)("required",!0),t.xp6(3),t.Q6J("value",a.data.priority_id)("required",!0),t.xp6(2),t.Q6J("value",a.data.status_id)("required",!0),t.xp6(8),t.Q6J("ngIf",null==a.taskFormGroup||null==(n=a.taskFormGroup.get("name"))?null:n.hasError("required"))}},dependencies:[f.O5,U.Nt,h.KE,h.bx,h.TO,I.IC,d.xw,d.SQ,d.Wh,d.s9,d.yH,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,$.k,H.p,V.q],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{margin-bottom:15px}"]})}return o})(),W=(()=>{class o{constructor(e,i,a){this.dialogRef=e,this.data=i,this.cdr=a,this.dialogAction="Adicionar",i.id&&(this.dialogAction=`Editar #${i.id}`)}isFormValid(){return this.form?.isFormValid()??!1}getFormValue(){return this.form?.getFormValue()}closeDialog(e){this.dialogRef.close(e)}ngAfterViewChecked(){this.cdr.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(p.so),t.Y36(p.WI),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-task-form-dialog"]],viewQuery:function(i,a){if(1&i&&t.Gf(X,5),2&i){let n;t.iGM(n=t.CRH())&&(a.form=n.first)}},inputs:{dialogAction:"dialogAction"},decls:9,vars:4,consts:[["mat-dialog-title",""],[3,"data","submitedEvent"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled"]],template:function(i,a){1&i&&(t.TgZ(0,"p",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"app-task-form",1),t.NdJ("submitedEvent",function(c){return a.closeDialog(c)}),t.qZA()(),t.TgZ(4,"mat-dialog-actions")(5,"button",2),t._uU(6,"Cancelar"),t.qZA(),t.TgZ(7,"button",3),t._uU(8," Salvar "),t.qZA()()),2&i&&(t.xp6(1),t.hij(" ",a.dialogAction,"\n"),t.xp6(2),t.Q6J("data",a.data),t.xp6(4),t.Q6J("mat-dialog-close",a.getFormValue())("disabled",!a.isFormValid()))},dependencies:[v.lW,p.ZT,p.uh,p.xY,p.H8,X]})}return o})();class Tt extends G.o2{constructor(r){super(),this.taskService=r,this.tasksSubject=new T.X([]),this.loadingSubject=new T.X(!1),this.loading$=this.loadingSubject.asObservable(),this.count=0}connect(r){return this.tasksSubject.asObservable()}disconnect(r){this.tasksSubject.complete(),this.loadingSubject.complete()}load(r){this.loadingSubject.next(!0),this.taskService.paginate(r).pipe((0,O.K)(()=>(0,R.of)([])),(0,Y.x)(()=>this.loadingSubject.next(!1))).subscribe(e=>{this.count=e.meta.total,this.tasksSubject.next(e.data)})}getCount(){return this.count}}let K=(()=>{class o{constructor(e){this.apiService=e,this.resourceUrl=`${Q.N.apiBaseUrl}/tasks`}paginate(e){let i=(new q.LE).set("filter",e?.filter??"").set("sortColumn",e?.sortColumn??"id").set("sortOrder",e?.sortOrder??"asc").set("page",e?.page?.toString()??"1").set("per_page",e?.limit?.toString()??"10").set("project_id",e?.projectId?.toString()??"").set("priority_id",e?.priorityId?.toString()??"").set("status_id",e?.statusId?.toString()??"").set("user_id",e?.userId?.toString()??"");return this.apiService.getRequest(this.resourceUrl,i)}getById(e){return this.apiService.getById(this.resourceUrl,e).pipe((0,E.U)(i=>new x(i.data)))}create(e){return this.apiService.postRequest(this.getResourceUrl(),e)}update(e,i){const a=`${this.getResourceUrl()}/${e}`;return console.log(a),this.apiService.patchRequest(a,i)}getResourceUrl(){return this.resourceUrl}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(j.sM))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var bt=s(5986);function xt(o,r){1&o&&t._UZ(0,"th",19)}function vt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",20)(1,"mat-checkbox",21),t.NdJ("click",function(){const n=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggle(n))}),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(1),t.s9C("checked",3==e.status_id?"true":"false")}}function Zt(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"#"),t.qZA())}function St(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function jt(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Nome"),t.qZA())}function yt(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function wt(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Descri\xe7\xe3o"),t.qZA())}function kt(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.description)}}function At(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Status"),t.qZA())}function Ft(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.status.name)}}function Ut(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Prioridade"),t.qZA())}function It(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.priority.name)}}function Pt(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Usu\xe1rio"),t.qZA())}function Nt(o,r){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.user.name," ")}}function Dt(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1,"Descri\xe7\xe3o"),t.qZA())}function Gt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,n=t.oxw();return t.KtG(n.openEditDialog(a))}),t.TgZ(1,"mat-icon",25),t._uU(2,"edit"),t.qZA(),t._uU(3,"Editar "),t.qZA()}}function Ot(o,r){if(1&o&&(t.TgZ(0,"td",20),t.YNc(1,Gt,4,0,"button",23),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.deleted_at)}}function Rt(o,r){1&o&&t._UZ(0,"tr",26)}function Yt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("dblclick",function(){const n=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onRowDoubleClick(n))}),t.qZA()}}let tt=(()=>{class o{constructor(e,i,a){this.taskService=e,this.dialog=i,this.router=a,this.pageSizeOptions=[1,10,25,50,100],this.filter="",this.displayedColumns=["checkbox","id","name","status_id","priority_id","user_id","actions"],this.dataSource=new Tt(this.taskService)}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource,this.sort.sortChange.subscribe(()=>this.resetPaginator()),this.paginator.page.pipe((0,S.b)(()=>this.load())).subscribe(),this.sort.sortChange.pipe((0,S.b)(()=>this.load())).subscribe()}ngOnChanges(){this.projectId&&this.load()}load(){this.dataSource.load({filter:this.filter,sortColumn:this.sort.active,sortOrder:this.sort.direction,page:this.paginator.pageIndex+1,limit:this.paginator.pageSize,projectId:this.projectId||null,userId:this.userId||null,statusId:this.statusId||null,priorityId:this.priorityId||null})}search(e){this.resetPaginator(),this.filter=e,this.load()}onRowDoubleClick(e){this.openEditDialog(e)}toggle(e){e.status_id=e.status_id===b.Done?b.InProgress:b.Done,this.taskService.update(e.id.toString(),e).subscribe(i=>{this.load()})}openEditDialog(e){this.dialog.open(W,{width:"720px",data:e}).afterClosed().subscribe(a=>{a&&this.taskService.update(e.id.toString(),a).subscribe(n=>{this.load()})})}resetPaginator(){this.paginator.pageIndex=0}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(K),t.Y36(p.uw),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-task-table"]],viewQuery:function(i,a){if(1&i&&(t.Gf(Z.NW,5),t.Gf(_.YE,5),t.Gf(l.BZ,5),t.Gf(D.g5,5)),2&i){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first),t.iGM(n=t.CRH())&&(a.sort=n.first),t.iGM(n=t.CRH())&&(a.table=n.first),t.iGM(n=t.CRH())&&(a.tableSearchField=n.first)}},inputs:{projectId:"projectId",userId:"userId",statusId:"statusId",priorityId:"priorityId"},features:[t.TTD],decls:33,vars:7,consts:[[1,"container"],[3,"loading$"],["hint","Insira o nome do projeto que deseja localizar",3,"search"],["mat-table","","matSort","","aria-label","Elements",1,"mat-elevation-z8","full-width-table"],["matColumnDef","checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","status_id"],["matColumnDef","priority_id"],["matColumnDef","user_id"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dblclick",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",1,"mat-elevation-z8",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[3,"checked","click"],["mat-header-cell","","mat-sort-header",""],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["matSuffix",""],["mat-header-row",""],["mat-row","",3,"dblclick"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-loading-spinner",1),t.TgZ(2,"app-table-search-field",2),t.NdJ("search",function(c){return a.search(c)}),t.qZA(),t.TgZ(3,"table",3),t.ynx(4,4),t.YNc(5,xt,1,0,"th",5),t.YNc(6,vt,2,1,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,Zt,2,0,"th",8),t.YNc(9,St,2,1,"td",6),t.BQk(),t.ynx(10,9),t.YNc(11,jt,2,0,"th",8),t.YNc(12,yt,2,1,"td",6),t.BQk(),t.ynx(13,10),t.YNc(14,wt,2,0,"th",8),t.YNc(15,kt,2,1,"td",6),t.BQk(),t.ynx(16,11),t.YNc(17,At,2,0,"th",8),t.YNc(18,Ft,2,1,"td",6),t.BQk(),t.ynx(19,12),t.YNc(20,Ut,2,0,"th",8),t.YNc(21,It,2,1,"td",6),t.BQk(),t.ynx(22,13),t.YNc(23,Pt,2,0,"th",8),t.YNc(24,Nt,2,1,"td",6),t.BQk(),t.ynx(25,14),t._UZ(26,"th"),t.YNc(27,Dt,2,0,"th",8),t.YNc(28,Ot,2,1,"td",6),t.BQk(),t.YNc(29,Rt,1,0,"tr",15),t.YNc(30,Yt,1,0,"tr",16),t.qZA(),t._UZ(31,"mat-paginator",17,18),t.qZA()),2&i&&(t.xp6(1),t.Q6J("loading$",a.dataSource.loading$),t.xp6(28),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.dataSource.getCount())("pageIndex",0)("pageSize",10)("pageSizeOptions",a.pageSizeOptions))},dependencies:[f.O5,v.lW,J.Hw,h.R9,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,Z.NW,_.YE,_.nU,bt.oG,L.g,w.g],styles:[".container[_ngcontent-%COMP%]{padding-top:20px}.full-width-table[_ngcontent-%COMP%]{width:96%;margin:20px auto 0}mat-paginator[_ngcontent-%COMP%]{width:100%;margin:0 auto 20px}.mat-column-id[_ngcontent-%COMP%], .mat-column-checkbox[_ngcontent-%COMP%]{width:75px}.mat-column-actions[_ngcontent-%COMP%]{min-width:130px}.mat-column-description[_ngcontent-%COMP%]{min-width:250px}"]})}return o})();const qt=[{path:"",component:_t},{path:":id",component:(()=>{class o{constructor(e,i,a,n,c){this.route=e,this.dialog=i,this.projectService=a,this.taskService=n,this.authService=c,this.project=new C,this.task=new x,this.loadingSubject=new T.X(!1),this.isLoading$=this.loadingSubject.asObservable(),this.addButtonLabel="Adicionar Tarefa"}ngOnInit(){this.route.params.subscribe(e=>{this.routeParam=e.id,this.task.project_id=this.routeParam})}ngAfterViewInit(){setTimeout(()=>{this.getProjectById(this.routeParam),this.getCurrentUser()})}openCreateDialog(){console.log("openCreateDialog"),this.dialog.open(W,{width:"720px",data:this.task}).afterClosed().subscribe(i=>{i?.name&&(i.project_id=this.project.id,this.taskService.create(i).subscribe(a=>{this.task=new x,this.table.load()})),this.resetTask()})}resetTask(){this.task=new x,this.task.user_id=this.userId}getProjectById(e){this.loadingSubject.next(!0),this.projectService.getById(e).subscribe(i=>{this.project=i,this.loadingSubject.next(!1)})}getCurrentUser(){this.authService.getCurrentUser().subscribe(e=>{this.task.user_id=e.id})}onStatusSelectionChange(e){console.log(e),this.statusId=e.value}onStatusReset(e){console.log(e),this.statusId=void 0}onPrioritySelectionChange(e){console.log(e),this.priorityId=e.value}onPriorityReset(e){console.log(e),this.priorityId=void 0}onUserSelectionChange(e){console.log(e),this.userId=e.value}onUserReset(e){console.log(e),this.userId=void 0}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(g.gz),t.Y36(p.uw),t.Y36(y),t.Y36(K),t.Y36(j.e8))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-show"]],viewQuery:function(i,a){if(1&i&&t.Gf(tt,5),2&i){let n;t.iGM(n=t.CRH())&&(a.table=n.first)}},decls:22,vars:11,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutAlign","center","fxLayoutGap","10px","fxLayoutGap.xs","5px",1,"container"],[3,"loading$"],["fxFlex.gt-md","65","fxFlex.md","80","fxFlex","90"],["fxLayout","row","fxLayoutAlign","start end","fxLayoutGap","30px"],["fxFlex","20%"],["icon","add_task",1,"add-button",3,"buttonLabel","click"],[1,"container"],["fxLayout","row","fxLayoutAlign","center end","fxLayoutGap","30px"],["fxFlex","25%","fxFlexAlign","start start"],[3,"filtering","selectionChange","resetSelect"],["fxFlex","30%","fxFlexAlign","start send"],[3,"projectId","userId","statusId","priorityId"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-loading-spinner",1),t.TgZ(2,"div",2)(3,"mat-card")(4,"mat-card-header")(5,"mat-card-title"),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle"),t._uU(8,"Lista de tarefas do projeto"),t.qZA()(),t.TgZ(9,"mat-card-content")(10,"div",3)(11,"div",4)(12,"app-add-button",5),t.NdJ("click",function(){return a.openCreateDialog()}),t.qZA()()(),t.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"app-status-select",9),t.NdJ("selectionChange",function(c){return a.onStatusSelectionChange(c)})("resetSelect",function(c){return a.onStatusReset(c)}),t.qZA()(),t.TgZ(17,"div",8)(18,"app-priority-select",9),t.NdJ("selectionChange",function(c){return a.onPrioritySelectionChange(c)})("resetSelect",function(c){return a.onPriorityReset(c)}),t.qZA()(),t.TgZ(19,"div",10)(20,"app-user-select",9),t.NdJ("selectionChange",function(c){return a.onUserSelectionChange(c)})("resetSelect",function(c){return a.onUserReset(c)}),t.qZA()()(),t._UZ(21,"app-task-table",11),t.qZA()()()()()),2&i&&(t.xp6(1),t.Q6J("loading$",a.isLoading$),t.xp6(5),t.AsE("Projeto ",a.project.id," - ",a.project.name," "),t.xp6(6),t.Q6J("buttonLabel",a.addButtonLabel),t.xp6(4),t.Q6J("filtering",!0),t.xp6(2),t.Q6J("filtering",!0),t.xp6(2),t.Q6J("filtering",!0),t.xp6(1),t.Q6J("projectId",a.project.id)("userId",a.userId)("statusId",a.statusId)("priorityId",a.priorityId))},dependencies:[m.a8,m.dn,m.dk,m.$j,m.n5,d.xw,d.SQ,d.Wh,d.XD,d.yH,B.L,w.g,$.k,H.p,V.q,tt],styles:["mat-card-content[_ngcontent-%COMP%]{margin-top:20px}.container[_ngcontent-%COMP%]{padding-top:20px}"]})}return o})()}];let Et=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(qt),g.Bz]})}return o})(),Qt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.ez,Et,A.q,F.m,it]})}return o})()}}]);